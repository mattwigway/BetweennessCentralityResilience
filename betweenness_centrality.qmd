---
title: Betweenness centrality is not a network resilience metric
author: 
    - name: Matthew Bhagat-Conway
      affiliations:
        - department: Department of City and Regional Planning
          name: University of North Carolina at Chapel Hill
bibliography: bibliography.bib
abstract: |
    Betweenness centrality measures the importance of a link or node in a network
    based on how often it falls on the shortest path between other nodes. It was
    originally introduced in social network analysis, where it is interpreted as the
    ability an actor has to moderate communication between others in the network.
    In transportation, it is often used as a measure of the resilience impact of
    a particular link. In this article, I argue that betweenness centrality is not
    a theoretically valid measure of resilience, and provide hypothetical networks
    where it clearly fails to identify resilience issues.

    **Keywords:** betweenness centrality, resilience, networks, graph theory
execute:
    echo: false
    include: false
format:
    wordcount-pdf:
        keep-tex: true
        template-partials:
            - title.tex
        include-in-header:
            # https://stackoverflow.com/questions/75040607
            text: |
                \usepackage[margin=1in]{geometry}
                \usepackage[noblocks]{authblk}
                \renewcommand*{\Authsep}{, }
                \renewcommand*{\Authand}{, }
                \renewcommand*{\Authands}{, }
                \renewcommand\Affilfont{\small}
---

<!--# Lede: Betweenness centrality is often used to evaluate network resilience, but it is not theoretically justified. This article demonstrates that betweenness centrality fails to capture redundancy using three hypothetical networks. -->

```{r}
GRID_SIZE = 13

library(igraph)
library(tidyverse)
library(gridExtra)
devtools::load_all()
```

```{r}
center = (GRID_SIZE + 1) / 2

Ggrid = diagon_alley(GRID_SIZE, center, center)

gridbc = edge_betweenness(Ggrid)
```

```{r}
# and now the other graph
# figure out how many nodes need to be in the smaller section
# The subgraphs of all vertices above and to the right of and below
# and to the left of the central plaza will all have shortest paths
# passing through Diagon Alley - so the number of vertices in each of
# those subgraphs (which is the dimension of those subgraphs squared) squared
# is the target betweenness. In igraph at least, (i, j) and (j, i) are treated
# as a single path.
target_betweenness = ((GRID_SIZE - 1) / 2)^4
stopifnot(all.equal(target_betweenness, last(gridbc)))

# we want the total nodes to be equal so the betweennesses are comparable
# the number of nodes in the island multiplied the number of nodes in
# the mainland should roughly equal the target betweenness
# to do this we solve the system of simultaneous equations:
# n1 + n2 = n
# n1 * n2 = target_betweenness
#
# some simple algebra
# n1 = n - n2
# (n - n2) * n2 = target_betweenness
# nn2 - n2^2 = target_betweenness
# nn2 - n2^2 - target_betweenness = 0
# n2^2 - nn2 + target_betweenness = 0
# which looks like a quadratic equation we can solve with the quadratic formula
# 

n = gorder(Ggrid)

n2 = floor(min(
    (n + sqrt(n^2 - 4 * target_betweenness)) / 2,
    (n - sqrt(n^2 - 4 * target_betweenness)) / 2
))

n1 = n - n2

(target_betweenness - n1 * n2) / target_betweenness
```

```{r}
# make the graphs
mainland = gridded_graph(ceiling(sqrt(n1)), ceiling(sqrt(n1)))

while (gorder(mainland) > n1) {
    mainland = mainland - vertex(gorder(mainland))
}

island = gridded_graph(ceiling(sqrt(n2)), ceiling(sqrt(n2)), vidoffset=gorder(mainland), xoffset = GRID_SIZE + 2, yoffset = 2)

while (gorder(island) > n2) {
    island = island - vertex(gorder(island))
}

Gisland = mainland + island

# correctly merge weights
edge_attr(Gisland, "weight") = coalesce(
    edge_attr(Gisland, "weight_1"),
    edge_attr(Gisland, "weight_2")
)

vertex_attr(Gisland, "x") = coalesce(
    vertex_attr(Gisland, "x_1"),
    vertex_attr(Gisland, "x_2")
)

vertex_attr(Gisland, "y") = coalesce(
    vertex_attr(Gisland, "y_1"),
    vertex_attr(Gisland, "y_2")
)

edge_attr(Gisland, "curvature") = coalesce(
    edge_attr(Gisland, "curvature_1"),
    edge_attr(Gisland, "curvature_2")
)

# connect the island and mainland
Gisland = Gisland + edge(get_grid_vid(GRID_SIZE, 1, GRID_SIZE) + 1, gorder(mainland) + 1, weight=sqrt(10), curvature=0)

islandbc = edge_betweenness(Gisland)
```

```{r}
# multiplication factor of length is measured in Inkscape
Gislanddual = Gisland + edge(get_grid_vid(GRID_SIZE, 1, GRID_SIZE), gorder(mainland) + get_grid_vid(3, 1, 3), weight=sqrt(10) * 317.01/162.17, curvature=0.5)
dualbc = edge_betweenness(Gislanddual)
```

```{r}
#| include: false
# k-s tests for distributions
ks.1v2 = ks.test(islandbc, dualbc)
ks.gridv2 = ks.test(gridbc, dualbc)
ks.gridv1 = ks.test(gridbc, islandbc)
```

```{r}
stopifnot(length(V(Ggrid)) == 168)
stopifnot(length(V(Gisland)) == 168)
stopifnot(length(V(Gislanddual)) == 168)

# ensure statement about centralities being same is true
stopifnot(all.equal(islandbc, dualbc[seq_along(islandbc)]))
```

## Questions

Graph-theoretic metrics based on network structure are a common way to measure transportation resilience (albeit far from universal). Betweenness centrality is a common choice, though there are many other options [@sun_resilience_2020]. It has seen resilience applications in road networks [@testa_resilience_2015], railways [@to_centrality_2015], sewage networks [@okwori_edgebased_2024], and electrical grids [@wang_electrical_2012].

Betweenness centrality of a link is defined as the number of shortest paths between any pair of nodes in the graph that pass through this link. When there are multiple equally-short paths, betweenness centrality is divided evenly among their constituent links. Mathematically, the betweenness centrality $b_l$ of link $l$ is

$$
b_l = \displaystyle\sum_i\sum_{j \neq i}\frac{\#g_{ilj}}{\#g_{ij}}
$$ {#eq-bc}

where $i$ and $j$ are nodes in the graph, and $\#g_{ij}$ is the number of shortest paths from $i$ to $j$, while $\#g_{ilj}$ is the number of shortest paths from $i$ to $j$ that include link $l$ [@csardi-igraph-2025]. A link with high betweenness centrality lies on many shortest paths, which is often interpreted as meaning it is critical to network function.

@friedkin_theoretical_1991 provided theory for betweenness centrality in social networks. He argued that individuals with high betweenness centrality exerted significant influence on communication passing through them. Betweenness centrality is thus a measure of influence.

In this article, I demonstrate through simple example networks that betweenness centrality is not a valid measure of resilience. Resilience of a network is a measure of how well the network functions under disruption, and how quickly it recovers [@sun_resilience_2020]. Atemporal graph theoretic measures cannot quantify recovery time. It is common to evaluate resilience based only on the functionality of the network under disruption, which is ultimately related to redundancy and travel time on alternate routes (and, in congested networks, capacity of alternate routes). Betweenness centrality only considers shortest paths, and not the presence of longer alternates. It cannot measure redundancy, or the travel time or capacity of alternate routes, and thus is not a valid measure of resilience or functionality under disruption.

## Methods

I demonstrate the problem through three hypothetical networks that clearly differ in terms of resilience but not in terms of betweenness centrality, shown in @fig-nets. The first is a gridded network, with one diagonal road in the center, which I refer to as Diagon Alley. It will serve as a  shortcut on any path between southwest and northeast.

```{r}
#| output: true
#| include: true
#| fig-cap: The three stylized networks used in this article
#| label: fig-nets
#| fig-width: 11
#| fig-height: 5
#| fig-alt: Three networks. On the left is network that is well connected, a perfect grid other than one diagonal street in the center. The network is called Diagon Alley. In the center is a network consisting of two grids connected by a single bridge, labeled the Island network. On the right is the same network, but now with a second longer bridge added for redundancy, called the Short and Long Bridge network.
p1 = plot_graph(Ggrid) +
    labs(caption="a. Well-connected network\n(Diagon Alley)") +
    theme(plot.caption=element_text(hjust=0, size=14))
p2 = plot_graph(Gisland) +
    labs(caption="b. Poorly-connected network\n(Bridge)") +
    theme(plot.caption=element_text(hjust=0, size=14))
p3 = plot_graph(Gislanddual) +
    labs(caption="c. Better-connected network\n(Short and Long Bridge)") +
    theme(plot.caption=element_text(hjust=0, size=14))
p = grid.arrange(arrangeGrob(p1, p2, p3, nrow=1, widths=c(GRID_SIZE, GRID_SIZE + 2 + ceiling(sqrt(n2)), GRID_SIZE + 2 + ceiling(sqrt(n2)))))

ggsave("figures/figure-1.jpeg", p, width=11, height=5, dpi=300, bg="white")
ggsave("figures/figure-1.png", p, width=11, height=5, dpi=300, bg="white")
```

The second network consists of a "mainland" and an "island," both with gridded networks, and with a single link, which I refer to as the bridge, connecting them. The bridge will be part of the shortest path from any node on the island to the mainland or vice-versa, and thus will have high betweenness centrality. The third network adds a second, longer bridge, that is too long to be on any shortest path and therefore has no impact on betweenness centrality. Betweenness centrality is calculated using `igraph` [@csardi-igraph-2006; @csardi-igraph-2025] in R [@r-2025]. Code is available at <https://github.com/mattwigway/BetweennessCentralityResilience>.

## Findings

The betweenness centrality values for all three networks are shown in @fig-bc. As all three networks have `{r} n` nodes, betweenness centrality values are directly comparable. In the first network, Diagon Alley unsurprisingly has the highest betweenness centrality value, as it serves as a shortcut in an otherwise perfect grid. It has a betweenness centrality value of 1,296. In the second network, the bridge has the highest betweenness centrality, of 1,280—close to but _below_ the value for Diagon Alley, despite a clearly more important role in resilience. In the third network, despite the addition of the long bridge, the short bridge is still the shortest route for all access to the island. The betweenness centrality of the short bridge remains 1,280, even though it is clearly not nearly as critical to network function now that there is an alternative. The betweenness centrality of the long bridge is zero, because there is no path where taking that bridge is shorter than taking the short bridge. Betweenness centrality completely misses redundancy if that redundancy entirely consists of paths that are (maybe only slightly) longer than the shortest path.

```{r}
#| output: true
#| include: true
#| fig-cap: Betweenness centrality values for the three networks
#| label: fig-bc
#| fig-width: 12
#| fig-height: 5
#| fig-alt: Betweenness centrality values for the three networks. Betweenness centrality is very high for the diagonal link in the Diagon Alley network and similarly high for the shorter bridge in both of the other networks, but is near zero for the longer bridge.
p1 = plot_graph(Ggrid, gridbc) +
    labs(caption="a. Well-connected network\n(Diagon Alley)") +
    theme(plot.caption=element_text(hjust=0, size=14), legend.position="none") +
    scale_color_binned(breaks=c(0, 100, 200, 400, 800, 1600), limits=c(0, 1600), palette="viridis")
p2 = plot_graph(Gisland, islandbc) +
    labs(caption="b. Poorly-connected network\n(Island)") +
    theme(plot.caption=element_text(hjust=0, size=14), legend.position="none") +
    scale_color_binned(breaks=c(0, 100, 200, 400, 800, 1600), limits=c(0, 1600), palette="viridis")
p3 = plot_graph(Gislanddual, dualbc) +
    theme(plot.caption=element_text(hjust=0, size=14)) +
    labs(caption="c. Better-connected network\n(Short and Long Bridge)", color="Betweenness\ncentrality") +
    scale_color_binned(breaks=c(0, 100, 200, 400, 800, 1600), limits=c(0, 1600), palette="viridis")
p = grid.arrange(arrangeGrob(p1, p2, p3, nrow=1, widths=c(GRID_SIZE, GRID_SIZE + 2 + ceiling(sqrt(n2)), GRID_SIZE + 7.5 + ceiling(sqrt(n2)))))

ggsave("figures/figure-2.jpeg", p, width=11, height=5, dpi=300, bg="white")
ggsave("figures/figure-2.png", p, width=11, height=5, dpi=300, bg="white")
```

There is a difference in the distribution of betweenness centrality between the Diagon Alley graph and either of the other graphs. There are more mid-valued betweenness centralities in the Diagon Alley graph than the others. This difference is confirmed by Kolmogorov-Smirnov tests between the centralities in the Diagon Alley graph and the each of the other graphs (for both tests, p < `{r} ceiling(max(ks.gridv1$p.value, ks.gridv2$p.value) * 1000) / 1000`). However, the distributions of betweenness centrality are still not a reliable measure of resilience. In the Island and Short and Long Bridge networks, the betweenness centrality values are identical for all links other than the added bridge. The difference in both the statistical and geographic distribution of centralities between the Diagon Alley network and other networks is very dependent on exactly where in the Diagon Alley network the diagonal street is placed, and on the network being a perfect grid with no variations in block length (see supplemental materials).

Betweenness centrality is not a theoretically justified measure of transportation resilience. However, empirical results are mixed. @wan_survey_2021 found that removing nodes with high betweenness from real-world social and communications networks was very effective in causing disconnection. The networks used, however, differ from transport networks by having many high-degree nodes. Conversely, @liu_optimized_2024 found that nodes in the Shanghai metro with high betweenness also tended to have many alternatives, suggesting that high betweenness centrality could indicate a redundant (and therefore resilient) link in transport networks.

There are many alternatives to betweenness centrality for measuring transportation resilience, including alternative graph-theoretic measures. Connectivity-based metrics include the cyclomatic number (number of edges required to be removed to remove all cycles and thus all redundancy), density (number of edges divided by total possible number of edges), and link-node ratio [@sun_resilience_2020].  The clustering coefficient measures the number of triangles in the network, while the related meshedness coefficient essentially counts the number of city blocks [@yazdani_applying_2012]. These metrics do not allow identifying critical links or impacts on long-distance paths.

There are centrality metrics other than betweenness. These include degree centrality---the number of edges at each node---and eigenvector centrality, a recursive metric where each nodes' centrality is proportional to the centralities of the nodes it is connected to. Other centrality metrics are defined based on observed traffic flow [@sun_resilience_2020].  These generally exhibit the same concerns as betweenness centrality of not fully accounting for alternative routes.

Another metric is $i$-betweenness. A link is $i$-between two vertices if there is no way to get between them without using the link [@harary_structural_1965]. In the networks presented above, $i$-betweenness would identify the bridge in the second network as a critical location. However, $i$-betweenness does not differentiate short and long detours, nor does it assign any value to adding a third alternate path.

Simulation is another option, removing links from the network and evaluating connectivity [e.g., @aydin_integration_2018]. This approach may test removing all links individually, or random subsets. @jenelius_redundancy_2010 flag betweenness centrality as problematic, and rank links based on simulated impacts to users if links were removed. The challenge with a simulation approach is that in many networks the criticality of links will have a highly-skewed distribution. In the networks above, only the bridge in the second network affects overall connectivity when removed. A random sampling of links might not contain this link, while a complete enumeration may be computationally challenging.

Disruptions will often affect multiple links in a non-random fashion (e.g. all low-lying links). A better approach is to remove links based on forecast future hazards [e.g., @fan_climate_2023; @testa_resilience_2015]. This combines the vulnerability of each link with the vulnerability of the network structure itself. However, it is unable to identify links critical to network functionality that are not exceptionally vulnerable to the hazards modeled, though possibly to others—for instance, a crash or vehicle fire that causes long-term damage to the roadway.

@cardwell_populationbased_2026 take a re-weighting approach, where shortest-path trees are found repeatedly and used links are penalized; the algorithm is iterated until the are no major changes to routes. The number of iterations indicate the overall redundancy of the network, but this method cannot identify individual critical links, and may struggle with chokepoints in an otherwise resilient network.

The question of link-level resilience is essentially the inverse of the Road Network Design Problem, which selects an optimal set of potential links to improve connectivity [@farahani_review_2013]. A promising area of research would be applying similar algorithms to select an optimal set of links to remove from a network to maximally decrease connectivity; these links are particularly critical.

```{r}
# save for analysis in supplemental materials
saveRDS(list(
    Ggrid = Ggrid,
    gridbc = gridbc,
    Gisland = Gisland,
    islandbc = islandbc,
    Gislanddual = Gislanddual,
    dualbc = dualbc,
    GRID_SIZE = GRID_SIZE,
    n2 = n2
), "networks.Rds")
```

## Acknowledgements

The author wishes to thank the reviewers for their comments, particularly for suggesting the analysis of the distribution of centrality metrics.

## References